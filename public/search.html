<!doctype html>
<html id="job" lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="all,follow">
	<title>职位信息</title>
	<link rel="shortcut icon" href="/static/img/favicon.ico">
	<!-- global stylesheets -->
	<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/static/css/font-icon-style.css">
	<link rel="stylesheet" href="/static/css/style.default.css" id="theme-stylesheet">

	<!-- Core stylesheets -->
	<link rel="stylesheet" href="/static/css/pages/login.css">
	
	<script src="/static/js/jquery-3.3.1.min.js" type="text/javascript"></script>
	<script src="/static/js/tether.min.js" type="text/javascript"></script>
	<script src="/static/bootstrap/js/bootstrap.min.js"></script>

    <!--Global Javascript -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper/popper.min.js"></script>
    <script src="/static/js/tether.min.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <script src="/static/js/jquery.validate.min.js"></script> 
    <script src="/static/js/chart.min.js"></script> 
    <script src="/static/js/front.js"></script> 

<script type="text/javascript">
    function applyjob(jobid) {
        userid = sessionStorage["userId"];
        alert(userid);
        alert(jobid);
        $.ajax({
            type: "get",
            async: false,
            url: "/applyjob",
            data: {"jobId":jobid, "userId":userid},
            success: function(result){
                //alert(result);
                //disable button
            	$("#btn-apply-"+jobid).attr("disabled", true);
            	$("#btn-apply-"+jobid).addClass('disabled');
            },
            error: function(result) {
            	//alert(result);
            },
        });
    }
</script>

</head>
<body>

<div class="container ">

<div class="row">
	<div class="col-md-12">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
		  
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		    <span class="navbar-toggler-icon"></span>
		  </button>
		  <div class="collapse navbar-collapse" id="navbarNav">
		    <ul class="navbar-nav">
		      <li class="nav-item active">
		        <a class="nav-link" th:href="@{/index}">主页</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" th:href="@{/search_jobfunction}">职位搜索</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" th:href="@{/enterprise}">企业</a>
		      </li>
		    </ul>
		  </div>
		</nav>
	</div>
</div>

<div class="row">
	<div class="container mt-2">
		<form id="search_form" th:action="@{/search}" th:object="${searchForm}" method="get">
		  <div class="input-group">
			<input class="form-control" type="text" name="s_area" id="s_area" placeholder="选择城市">
			<input class="form-control" type="text" name="s_jobfunction" id="s_jobfunction" placeholder="职位类别">
			<input class="form-control" type="text" name="s_job" id="s_job" placeholder="">
			<input type="text" name="pageNumber" id="pageNumber" value="1" hidden="true"/>
			<div class="input-group-append">
		      <button class="btn btn-lg btn-block" type="submit">立即搜索</button>  
		    </div>
    	  </div>
		</form>
	</div>
</div>

<div class="row">
<div class="col-md-5">职位名称
</div>
<div class="col-md-5">公司名称
</div>
<div class="col-md-2">操作
</div>
</div>

<div th:each="job,jobStat:${jobs}" class="row">
<div class="col-md-5">
	<div class="row">
		<a th:href="@{'/job?jobId='+${job.id}}" target="_blank" th:text="${job.name}"></a>
	</div>
</div>
<div class="col-md-5"><a th:href="@{'/enterprise?entId='+${job.getCompany().getId()}}" target="_blank" th:text="${job.company.name}"></a>
</div>
<div class="col-md-2"><button type="button" class="btn btn-primary" th:id="'btn-apply-'+${job.getId()}" th:onclick="'applyjob('+${job.getId()}+');'">申请职位</button>
</div>
</div>


<div class="row">
	<a th:if="${pageNumber gt 1}" th:href="@{'/search?pageNumber='+${pageNumber-1}+'&s_area='+${s_area}+'&s_jobfunction='+${s_jobfunction}+'&s_job='+${s_job}}">上一页</a>
	<span th:text="'第'+${pageNumber}+'页'"></span>
	<a th:if="${pageNumber lt totalPages}" th:href="@{'/search?pageNumber='+${pageNumber+1}+'&s_area='+${s_area}+'&s_jobfunction='+${s_jobfunction}+'&s_job='+${s_job}}">下一页</a>
</div>


</div>




</div>


</body>

</html>